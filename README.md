# QCTQ - –£–º–Ω—ã–µ –ß–∞—Å—ã-–•–∞–± —Å OTA –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

## üì± –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

QCTQ - —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —É–º–Ω—ã—Ö —á–∞—Å–æ–≤ –Ω–∞ –±–∞–∑–µ ESP8266 (Wemos D1 Mini) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- ‚è∞ –ß–∞—Å–æ–≤ –∏ –¥–∞—Ç—ã
- üì± Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ relay —Å–µ—Ä–≤–µ—Ä
- üéØ –í–∏–∫—Ç–æ—Ä–∏–Ω –∏ –∫–≤–µ—Å—Ç–æ–≤
- üîÑ OTA (Over-The-Air) –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø—Ä–æ—à–∏–≤–∫–∏
- üì° WiFi Manager

## üöÄ OTA –°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
2. **–°–µ—Ä–≤–µ—Ä —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –≤–µ—Ä—Å–∏–∏** –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
3. **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç** –Ω–æ–≤—É—é –ø—Ä–æ—à–∏–≤–∫—É —Å GitHub Releases
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ä—Å–∏–π:

- **v2.0.0** - –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Å relay —Å–µ—Ä–≤–µ—Ä–æ–º
- **v2.1.0** - –£–ª—É—á—à–µ–Ω–Ω–∞—è OTA —Å–∏—Å—Ç–µ–º–∞
- **v2.2.0** - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Arduino IDE –∏–ª–∏ Arduino CLI
- ESP8266 Board Package
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ (—Å–º. `qctq_relay_firmware/qctq_relay_firmware.ino`)

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è:
```bash
cd qctq_relay_firmware
arduino-cli compile --fqbn esp8266:esp8266:d1_mini . --output-dir ./build
```

### –ü—Ä–æ—à–∏–≤–∫–∞:
```bash
esptool.py --port /dev/tty.usbserial-110 --baud 115200 write_flash 0x0 build/qctq_relay_firmware.ino.bin
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ø—Ä–æ—à–∏–≤–∫–µ:
```cpp
#define FIRMWARE_VERSION "2.0.0"


```

### Relay —Å–µ—Ä–≤–µ—Ä:
- **–ê–¥—Ä–µ—Å:** http://84.201.179.109
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:** http://84.201.179.109/admin
- **API:** REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:** 12+ QCTQ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **–†–∞–∑–º–µ—Ä –ø—Ä–æ—à–∏–≤–∫–∏:** ~456KB
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM:** 43%
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Flash:** 39%

## üîÑ OTA Endpoints

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:
```
GET /firmware/check/{device_id}?current_version={version}
```

### –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏:
```
GET /firmware/download/{version}
```

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–∏–≤–∫–∏:
```
POST /firmware/register
{
  "version": "2.1.0",
  "url": "https://github.com/pl0schadka/qctq/releases/download/v2.1.0/qctq_relay_firmware_v2.1.0.bin",
  "size": 456352,
  "checksum": "sha256:...",
  "description": "–£–ª—É—á—à–µ–Ω–Ω–∞—è OTA —Å–∏—Å—Ç–µ–º–∞"
}
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. Push –≤ branch
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **Issues:** https://github.com/pl0schadka/qctq/issues
- **Discussions:** https://github.com/pl0schadka/qctq/discussions
