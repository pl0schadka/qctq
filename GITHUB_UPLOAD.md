# üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–ª–∏–∑–æ–≤ –Ω–∞ GitHub

## üìã –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è GitHub CLI

```bash
# –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ GitHub
gh auth login

# –í—ã–±–µ—Ä–∏—Ç–µ:
# - GitHub.com
# - HTTPS
# - Yes (authenticate Git with your GitHub credentials)
# - Login with a web browser
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–ª–∏–∑–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–ª–∏–∑ v2.1.0
./upload_release.sh 2.1.0 "–£–ª—É—á—à–µ–Ω–Ω–∞—è OTA —Å–∏—Å—Ç–µ–º–∞"

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–ª–∏–∑ v2.2.0
./upload_release.sh 2.2.0 "–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏"
```

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–°–∫—Ä–∏–ø—Ç `upload_release.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç** –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ `releases/<version>/`
2. ‚úÖ **–°–æ–∑–¥–∞–µ—Ç** GitHub Release —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
3. ‚úÖ **–ó–∞–≥—Ä—É–∂–∞–µ—Ç** .bin —Ñ–∞–π–ª –∏ release_info.json
4. ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç** –ø—Ä–æ—à–∏–≤–∫—É –≤ relay —Å–µ—Ä–≤–µ—Ä–µ
5. ‚úÖ **–£–≤–µ–¥–æ–º–ª—è–µ—Ç** –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ OTA –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
releases/
‚îú‚îÄ‚îÄ v2.0.0/
‚îÇ   ‚îú‚îÄ‚îÄ qctq_relay_firmware_v2.0.0.bin
‚îÇ   ‚îî‚îÄ‚îÄ release_info.json
‚îú‚îÄ‚îÄ v2.1.0/
‚îÇ   ‚îú‚îÄ‚îÄ qctq_relay_firmware_v2.1.0.bin
‚îÇ   ‚îî‚îÄ‚îÄ release_info.json
‚îî‚îÄ‚îÄ v2.2.0/
    ‚îú‚îÄ‚îÄ qctq_relay_firmware_v2.2.0.bin
    ‚îî‚îÄ‚îÄ release_info.json
```

## üõ†Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–µ–ª–∏–∑–∞

### 1. –û–±–Ω–æ–≤–∏—Ç–µ –≤–µ—Ä—Å–∏—é –≤ –ø—Ä–æ—à–∏–≤–∫–µ

```cpp
// –í qctq_relay_firmware.ino
#define FIRMWARE_VERSION "2.2.0"
```

### 2. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ—à–∏–≤–∫—É

```bash
cd qctq_relay_firmware
arduino-cli compile --fqbn esp8266:esp8266:d1_mini . --output-dir ./build
```

### 3. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É —Ä–µ–ª–∏–∑–∞

```bash
mkdir -p releases/v2.2.0
cp qctq_relay_firmware/build/qctq_relay_firmware.ino.bin releases/v2.2.0/qctq_relay_firmware_v2.2.0.bin
```

### 4. –°–æ–∑–¥–∞–π—Ç–µ release_info.json

```json
{
  "version": "2.2.0",
  "release_date": "2025-08-28",
  "description": "–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è",
  "changes": [
    "–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è X",
    "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ Y",
    "–£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"
  ],
  "firmware": {
    "filename": "qctq_relay_firmware_v2.2.0.bin",
    "size": 456352,
    "checksum": "sha256:NEW_HASH_HERE",
    "url": "https://github.com/pl0schadka/qctq/releases/download/v2.2.0/qctq_relay_firmware_v2.2.0.bin"
  }
}
```

### 5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–µ–ª–∏–∑

```bash
./upload_release.sh 2.2.0 "–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è"
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### GitHub Release
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ https://github.com/pl0schadka/qctq/releases
- –£–≤–∏–¥–∏—Ç–µ –Ω–æ–≤—ã–π —Ä–µ–ª–∏–∑ —Å .bin —Ñ–∞–π–ª–æ–º

### Relay —Å–µ—Ä–≤–µ—Ä
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
curl -X GET "http://84.201.179.109/firmware/versions"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
curl -X GET "http://84.201.179.109/firmware/check/QCTQ_6011?current_version=2.1.0"
```

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –û—Ç–∫—Ä–æ–π—Ç–µ http://84.201.179.109/admin
- –í —Ä–∞–∑–¥–µ–ª–µ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∞–º–∏" —É–≤–∏–¥–∏—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```bash
gh auth login
```

### –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–∞
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é
gh repo view pl0schadka/qctq
```

### –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ relay
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
curl -X GET "http://84.201.179.109/health"
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞:

‚úÖ **GitHub Release** —Å–æ–∑–¥–∞–Ω —Å .bin —Ñ–∞–π–ª–æ–º  
‚úÖ **Relay —Å–µ—Ä–≤–µ—Ä** –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª –ø—Ä–æ—à–∏–≤–∫—É  
‚úÖ **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤—è—Ç—Å—è  
‚úÖ **OTA —Å–∏—Å—Ç–µ–º–∞** –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç  

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OTA

1. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 5 –º–∏–Ω—É—Ç** (—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Serial Monitor** - —É–≤–∏–¥–∏—Ç–µ –ª–æ–≥–∏ OTA –ø—Ä–æ—Ü–µ—Å—Å–∞
3. **–ù–∞ –¥–∏—Å–ø–ª–µ–µ** –ø–æ—è–≤–∏—Ç—Å—è "OTA Update..." –≤–æ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
4. **–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏** –≤–µ—Ä—Å–∏—è –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ –Ω–æ–≤—É—é

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ push —Ç–µ–≥–æ–≤:

```yaml
# .github/workflows/release.yml
name: Auto Release

on:
  push:
    tags:
      - 'v*'

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: arduino/setup-arduino-cli@v1
      - run: arduino-cli compile --fqbn esp8266:esp8266:d1_mini qctq_relay_firmware
      - run: ./upload_release.sh ${{ github.ref_name#v }}
```

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ OTA –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π! üöÄ
